# Phase 2 UI 설계: 카카오봇 관리 대시보드

## 1. 컴포넌트 구조 (Component Architecture)

`src/` 또는 `frontend/src/` 하위에 위치할 컴포넌트 트리입니다.

```
KakaoBotAdmin/
├── index.jsx (Main Container)
│   ├── Header.jsx              # 상단 헤더 (제목, 연결 상태)
│   ├── SummaryCards.jsx        # 상단 요약 정보 (활성 방, 대기 메시지 등)
│   └── TabNavigation.jsx       # 탭 메뉴 (MUI Tabs 등 활용)
│
├── views/                      # 탭별 메인 뷰
│   ├── RoomManagementView.jsx  # [탭1] 방 관리
│   │   ├── RoomStats.jsx       # (옵션) 방 관련 간단 통계
│   │   ├── RoomTable.jsx       # 방 목록 테이블 (행: RoomTableRow)
│   │   ├── RoomModal.jsx       # 방 추가/편집 모달 (Form 포함)
│   │   └── RoomDeleteDialog.jsx # 삭제 확인 다이얼로그
│   │
│   ├── AdminSettingsView.jsx   # [탭2] 관리자 설정
│   │   ├── AdminInput.jsx      # 관리자 추가 입력 폼
│   │   └── AdminList.jsx       # 관리자 목록 (Chip 목록)
│   │
│   ├── OutboxMonitorView.jsx   # [탭3] 발송 현황
│   │   ├── OutboxStatus.jsx    # 상태별 카운트 (Pending, Sent, Failed)
│   │   ├── LogFilter.jsx       # 필터링 도구 (상태별, 기간별)
│   │   └── LogTable.jsx        # 발송 로그 테이블 (재전송 버튼 포함)
│   │
│   └── SettingsView.jsx        # [탭4] 설정
│       ├── TokenSection.jsx    # API 토큰 관리 (보기/복사/재발급)
│       ├── PollingSection.jsx  # 폴링 간격 설정
│       └── ConnectionTest.jsx  # 연결 테스트 도구
│
└── components/                 # 재사용 가능한 공통 컴포넌트 (UI Kit)
    ├── StatusBadge.jsx         # 상태 표시 뱃지 (활성/비활성, 성공/실패)
    ├── ToggleSwitch.jsx        # 커스텀 토글 스위치
    └── DataCard.jsx            # 요약 정보용 카드 스타일
```

---

## 2. 화면별 와이어프레임 (Wireframes)

### 2.1 메인 레이아웃 (공통)
```
+---------------------------------------------------------------+
| [Header]  🤖 카카오봇 관리                      (🟢 연결됨)    |
+---------------------------------------------------------------+
| [Summary Cards]                                               |
| +--------------+  +--------------+  +--------------+          |
| | 🏠 활성 방    |  | 👥 관리자     |  | 📤 대기 중    |          |
| |      3       |  |      2       |  |      5       |          |
| +--------------+  +--------------+  +--------------+          |
+---------------------------------------------------------------+
| [Tabs]  [방 관리]  [관리자 설정]  [발송 현황]  [설정]            |
+---------------------------------------------------------------+
|                                                               |
|  (선택된 탭의 내용이 여기에 표시됨)                                |
|                                                               |
+---------------------------------------------------------------+
```

### 2.2 방 관리 탭 (RoomManagement)
```
+---------------------------------------------------------------+
|  방 목록                                       [+ 방 추가]    |
|                                                               |
|  | 방 이름       | 상태     | 알림 | 명령 | 작업       |    |
|  |--------------|----------|------|------|------------|    |
|  | 미래성장처    | 🟢 활성   | [ON] | [ON] | [✏️] [🗑️] |    |
|  | 개발팀       | 🔴 비활성  | [OFF]| [ON] | [✏️] [🗑️] |    |
|  | 인사팀       | 🟢 활성   | [ON] | [OFF]| [✏️] [🗑️] |    |
|                                                               |
+---------------------------------------------------------------+
```
*   **모달 (방 추가/편집)**
    *   제목: 방 설정
    *   입력: 방 이름 (Text Field)
    *   설정:
        *   [x] 방 활성화 (Enabled)
        *   [x] 일정 알림 발송 (Schedule Notify)
        *   [x] 명령어 응답 허용 (Commands Enabled)
    *   버튼: [취소] [저장]

### 2.3 관리자 설정 탭 (AdminSettings)
```
+---------------------------------------------------------------+
|  관리자 관리                                                   |
|                                                               |
|  [ 닉네임을 입력하세요...           ]  [ + 추가 ]              |
|                                                               |
|  등록된 관리자:                                                |
|  ( Kminer [x] )  ( 홍길동 [x] )  ( 관리자3 [x] )               |
|                                                               |
|  ⚠️ 주의: 카카오톡 닉네임은 변경 가능하므로 유의하세요.            |
+---------------------------------------------------------------+
```

### 2.4 발송 현황 탭 (OutboxMonitor)
```
+---------------------------------------------------------------+
|  [대기중: 5] [발송완료: 120] [실패: 2]                         |
+---------------------------------------------------------------+
|  필터: (o) 전체  ( ) 대기중  ( ) 실패                          |
|  [새로고침]                                                   |
|                                                               |
|  | 시간   | 방      | 메시지 요약      | 상태      | 작업   |    |
|  |--------|---------|------------------|-----------|--------|    |
|  | 10:30  | 개발팀   | [일정] 회의...   | ✅ 완료    |   -    |    |
|  | 10:28  | 인사팀   | [일정] 면접...   | ❌ 실패    | [재전송]|    |
|  | 10:25  | 기획팀   | [공지] 회식...   | ⏳ 대기중  |   -    |    |
|                                                               |
|  < 1 2 3 >                                                    |
+---------------------------------------------------------------+
```

### 2.5 설정 탭 (Settings)
```
+---------------------------------------------------------------+
|  API 토큰 설정                                                 |
|  현재 토큰: a1b2****************z6   [👁️ 보기] [📋 복사]      |
|                                          [🔄 새 토큰 생성]     |
|---------------------------------------------------------------|
|  폴링 설정                                                     |
|  간격(초): [ 15 ]   [저장]                                     |
|---------------------------------------------------------------|
|  시스템 상태                                                   |
|  AVD 봇 연결 상태 확인:   [📡 연결 테스트]                      |
|  -> 결과: ✅ 2026-01-15 14:00:05 정상 응답 확인됨               |
+---------------------------------------------------------------+
```

---

## 3. 상호작용 흐름 (User Scenarios)

### 시나리오 A: 새로운 카톡 방 연동하기
1.  사용자가 **[방 관리]** 탭을 클릭합니다.
2.  **[+ 방 추가]** 버튼을 클릭합니다.
3.  모달 창이 뜨면 방 이름(예: "해외사업부")을 입력합니다.
4.  "일정 알림" 스위치를 켭니다.
5.  **[저장]**을 누르면 테이블에 새 행이 추가되고, 즉시 서버에 반영됩니다.

### 시나리오 B: 발송 실패 메시지 재시도
1.  대시보드 상단 요약 카드에 **"발송 실패: 1"**이 빨간색으로 표시된 것을 발견합니다.
2.  **[발송 현황]** 탭으로 이동합니다.
3.  필터에서 **[실패]**를 선택하거나 목록에서 빨간색 상태 아이콘을 찾습니다.
4.  에러 메시지(예: "timeout")를 확인합니다.
5.  우측의 **[재전송]** 버튼을 클릭합니다.
6.  상태가 즉시 **"⏳ 대기중"**으로 변경되고, 잠시 후 AVD 봇이 가져가면 처리됩니다.

### 시나리오 C: API 토큰 재발급
1.  **[설정]** 탭으로 이동합니다.
2.  **[새 토큰 생성]** 버튼을 클릭합니다.
3.  "기존 봇의 연결이 끊어집니다. 계속하시겠습니까?" 경고 모달이 뜹니다.
4.  **[확인]**을 누르면 새 토큰이 발급되어 화면에 표시됩니다.
5.  사용자는 **[복사]** 버튼을 눌러 새 토큰을 복사한 뒤, AVD 봇 설정 파일(`config.js`)에 붙여넣습니다.

---

## 4. 스타일 가이드 (Design Specs)

### 색상 (Color Palette)
*   **Primary**: `#1976d2` (메인 블루 - 헤더, 주요 버튼)
*   **Secondary**: `#424242` (다크 그레이 - 보조 텍스트, 닫기 버튼)
*   **Success**: `#4caf50` (성공, 활성 상태, ON)
*   **Warning**: `#ff9800` (대기 중, 주의)
*   **Error**: `#f44336` (실패, 삭제, OFF)
*   **Background**: `#f5f5f5` (앱 배경)
*   **Surface**: `#ffffff` (카드, 모달 배경)

### 타이포그래피 (Typography)
*   **Font Family**: `Pretendard`, `Noto Sans KR`, `Roboto`, `sans-serif`
*   **Headings**: Bold, 20px~24px
*   **Body**: Regular, 14px~16px
*   **Captions**: Regular, 12px (회색)

### 반응형 (Responsive)
*   **Mobile (< 768px)**:
    *   탭 네비게이션이 가로 스크롤 가능하게 변경되거나 드롭다운으로 축소
    *   테이블의 일부 컬럼(ID, 상세 타입 등) 숨김 처리 또는 카드형 리스트로 변환
    *   모달은 전체 화면(Full Screen)으로 표시
*   **Desktop (> 1200px)**:
    *   사이드바 형태 레이아웃 고려 가능 (현재는 상단 탭 유지)

---

## 5. 접근성 (Accessibility)

1.  **키보드 탐색**: 모든 입력 필드, 버튼, 탭은 `Tab` 키로 이동 가능해야 합니다.
2.  **ARIA Label**:
    *   아이콘 버튼(편집, 삭제, 닫기 등)에는 반드시 `aria-label` 속성을 제공합니다.
    *   상태 아이콘(🟢, 🔴)에는 `role="img"`와 적절한 텍스트 설명을 추가합니다.
3.  **포커스 관리**: 모달이 열릴 때 포커스를 모달 내부로 이동시키고, 닫힐 때 이전 위치로 복귀시킵니다.
4.  **색상 대비**: 텍스트와 배경의 명도 대비를 4.5:1 이상 유지합니다 (특히 칩이나 뱃지의 텍스트).
